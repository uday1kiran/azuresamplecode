Vagrant.configure("2") do |config|
    # For a complete reference, please see the online documentation at
    # https://docs.vagrantup.com.
  
    # This refers to a local `.box` file which should have been generated by running sets in README.md
    config.vm.box = "bento/ubuntu-23.04"
    config.vm.network "private_network", ip: "192.168.35.48"
	config.vm.network "forwarded_port", guest: 9042, host: 9042
  
    # Vagrant has a default synced folder which you might choose to disable
    config.vm.synced_folder ".", "/vagrant"
  
    # This custom built box is not setup to support updates anyway, hence they are been disabled
    config.vm.box_check_update = false
	config.vm.provider "virtualbox" do |vb|
		vb.memory = "4096"
		vb.cpus = 2
	end

   config.vm.provision "shell", inline: <<-SHELL
     apt update -y
     apt install -y nano openjdk-8-jre-headless libaio1
	 echo "deb https://debian.datastax.com/enterprise/ stable main" | tee -a /etc/apt/sources.list.d/datastax.sources.list
	 curl -L https://debian.datastax.com/debian/repo_key | apt-key add -
	 apt update -y
     apt install -y dse=6.8.40-1 \
    dse-full=6.8.40-1 \
    dse-libcassandra=6.8.40-1 \
    dse-libgraph=6.8.40-1 \
    dse-libhadoop2-client-native=6.8.40-1 \
    dse-libhadoop2-client=6.8.40-1 \
    dse-liblog4j=6.8.40-1 \
    dse-libsolr=6.8.40-1 \
    dse-libspark=6.8.40-1 \
    dse-libtomcat=6.8.40-1
	sudo apt-get install dse-demos=6.8.40-1
	#systemctl enable dse
	#service dse start
	#srevice dse status
	cp /vagrant/cassandra.yaml /etc/dse/cassandra/cassandra.yaml
   SHELL
  ##After connecting
  ##vagrant ssh
  ##sudo service dse stop
  ##sudo service dse start
  end